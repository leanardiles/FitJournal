<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1600 1400" style="background-color: #1a1a1a;">
  <defs>
    <style>
      .entity { fill: none; stroke: #ffffff; stroke-width: 2; }
      .entity-name { fill: #ffffff; font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle; }
      .attribute { fill: none; stroke: #ffffff; stroke-width: 1.5; }
      .attribute-text { fill: #ffffff; font-family: Arial, sans-serif; font-size: 13px; text-anchor: middle; }
      .pk { fill: #90EE90; }
      .fk { fill: #FFB6C1; }
      .relationship { fill: #ff4444; stroke: #ff4444; stroke-width: 2; }
      .relationship-line { stroke: #ff4444; stroke-width: 2; fill: none; }
      .relationship-text { fill: #ffffff; font-family: Arial, sans-serif; font-size: 12px; text-anchor: middle; }
      .cardinality { fill: #ffffff; font-family: Arial, sans-serif; font-size: 12px; }
      .title { fill: #ffffff; font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; text-anchor: middle; }
    </style>
  </defs>

  <!-- Title -->
  <text x="800" y="30" class="title">FITNESS TRACKER - UPDATED ER DIAGRAM</text>

  <!-- USERS Entity -->
  <rect x="350" y="80" width="200" height="40" class="entity"/>
  <text x="450" y="105" class="entity-name">USERS</text>
  
  <ellipse cx="280" cy="150" rx="80" ry="25" class="attribute pk"/>
  <text x="280" y="155" class="attribute-text">user_id PK</text>
  
  <ellipse cx="450" cy="150" rx="80" ry="25" class="attribute"/>
  <text x="450" y="155" class="attribute-text">user_email</text>
  
  <ellipse cx="620" cy="150" rx="90" ry="25" class="attribute"/>
  <text x="620" y="155" class="attribute-text">user_password</text>
  
  <ellipse cx="280" cy="200" rx="90" ry="25" class="attribute"/>
  <text x="280" y="205" class="attribute-text">user_first_name</text>
  
  <ellipse cx="450" cy="200" rx="90" ry="25" class="attribute"/>
  <text x="450" y="205" class="attribute-text">user_last_name</text>
  
  <ellipse cx="620" cy="200" rx="70" ry="25" class="attribute"/>
  <text x="620" y="205" class="attribute-text">user_sex</text>
  
  <ellipse cx="280" cy="250" rx="70" ry="25" class="attribute"/>
  <text x="280" y="255" class="attribute-text">user_age</text>
  
  <ellipse cx="450" cy="250" rx="110" ry="25" class="attribute"/>
  <text x="450" y="255" class="attribute-text">user_unit_preference</text>
  
  <ellipse cx="620" cy="250" rx="80" ry="25" class="attribute"/>
  <text x="620" y="255" class="attribute-text">user_weight</text>
  
  <ellipse cx="280" cy="300" rx="80" ry="25" class="attribute"/>
  <text x="280" y="305" class="attribute-text">user_height</text>
  
  <ellipse cx="450" cy="300" rx="100" ry="25" class="attribute"/>
  <text x="450" y="305" class="attribute-text">user_subscription</text>
  
  <ellipse cx="620" cy="300" rx="85" ry="25" class="attribute"/>
  <text x="620" y="305" class="attribute-text">user_is_active</text>

  <!-- EXERCISES Entity -->
  <rect x="900" y="350" width="200" height="40" class="entity"/>
  <text x="1000" y="375" class="entity-name">EXERCISES</text>
  
  <ellipse cx="820" cy="420" rx="80" ry="25" class="attribute pk"/>
  <text x="820" y="425" class="attribute-text">exercise_id PK</text>
  
  <ellipse cx="1000" cy="420" rx="90" ry="25" class="attribute"/>
  <text x="1000" y="425" class="attribute-text">exercise_name</text>
  
  <ellipse cx="1180" cy="420" rx="110" ry="25" class="attribute"/>
  <text x="1180" y="425" class="attribute-text">exercise_muscle_group</text>
  
  <ellipse cx="820" cy="470" rx="140" ry="25" class="attribute"/>
  <text x="820" y="475" class="attribute-text">exercise_user_current_weight</text>
  
  <ellipse cx="1000" cy="470" rx="70" ry="25" class="attribute fk"/>
  <text x="1000" y="475" class="attribute-text">user_id FK</text>
  
  <ellipse cx="1180" cy="470" rx="120" ry="25" class="attribute"/>
  <text x="1180" y="475" class="attribute-text">exercise_is_in_routine</text>
  
  <ellipse cx="820" cy="520" rx="130" ry="25" class="attribute"/>
  <text x="820" y="525" class="attribute-text">exercise_times_performed</text>
  
  <ellipse cx="1000" cy="520" rx="85" ry="25" class="attribute"/>
  <text x="1000" y="525" class="attribute-text">exercise_link</text>
  
  <ellipse cx="1180" cy="520" rx="75" ry="25" class="attribute"/>
  <text x="1180" y="525" class="attribute-text">comments</text>

  <!-- DEFAULT_EXERCISES Entity -->
  <rect x="1300" y="350" width="250" height="40" class="entity"/>
  <text x="1425" y="375" class="entity-name">DEFAULT_EXERCISES</text>
  
  <ellipse cx="1320" cy="420" rx="120" ry="25" class="attribute pk"/>
  <text x="1320" y="425" class="attribute-text">default_exercise_id PK</text>
  
  <ellipse cx="1425" cy="470" rx="90" ry="25" class="attribute"/>
  <text x="1425" y="475" class="attribute-text">exercise_name</text>
  
  <ellipse cx="1320" cy="520" rx="110" ry="25" class="attribute"/>
  <text x="1320" y="525" class="attribute-text">exercise_muscle_group</text>
  
  <ellipse cx="1500" cy="520" rx="85" ry="25" class="attribute"/>
  <text x="1500" y="525" class="attribute-text">exercise_link</text>

  <!-- ROUTINE_DAYS Entity -->
  <rect x="50" y="350" width="200" height="40" class="entity"/>
  <text x="150" y="375" class="entity-name">ROUTINE_DAYS</text>
  
  <ellipse cx="70" cy="420" rx="80" ry="25" class="attribute pk"/>
  <text x="70" y="425" class="attribute-text">routine_id PK</text>
  
  <ellipse cx="150" cy="470" rx="70" ry="25" class="attribute fk"/>
  <text x="150" y="475" class="attribute-text">user_id FK</text>
  
  <ellipse cx="230" cy="420" rx="95" ry="25" class="attribute"/>
  <text x="230" y="425" class="attribute-text">days_per_week</text>

  <!-- ROUTINE_MUSCLES_PER_DAY Entity -->
  <rect x="50" y="580" width="280" height="40" class="entity"/>
  <text x="190" y="605" class="entity-name">ROUTINE_MUSCLES_PER_DAY</text>
  
  <ellipse cx="100" cy="650" rx="110" ry="25" class="attribute pk"/>
  <text x="100" y="655" class="attribute-text">routine_day_id PK</text>
  
  <ellipse cx="280" cy="650" rx="70" ry="25" class="attribute fk"/>
  <text x="280" y="655" class="attribute-text">user_id FK</text>
  
  <ellipse cx="100" cy="700" rx="90" ry="25" class="attribute"/>
  <text x="100" y="705" class="attribute-text">day_number</text>
  
  <ellipse cx="280" cy="700" rx="95" ry="25" class="attribute"/>
  <text x="280" y="705" class="attribute-text">muscle_group</text>

  <!-- WORKOUT_STATE Entity -->
  <rect x="400" y="580" width="200" height="40" class="entity"/>
  <text x="500" y="605" class="entity-name">WORKOUT_STATE</text>
  
  <ellipse cx="420" cy="650" rx="70" ry="25" class="attribute pk"/>
  <text x="420" y="655" class="attribute-text">state_id PK</text>
  
  <ellipse cx="580" cy="650" rx="70" ry="25" class="attribute fk"/>
  <text x="580" y="655" class="attribute-text">user_id FK</text>
  
  <ellipse cx="420" cy="700" rx="115" ry="25" class="attribute"/>
  <text x="420" y="705" class="attribute-text">current_day_number</text>
  
  <ellipse cx="580" cy="700" rx="110" ry="25" class="attribute"/>
  <text x="580" y="705" class="attribute-text">last_workout_date</text>

  <!-- WORKOUT_SESSIONS Entity -->
  <rect x="700" y="700" width="220" height="40" class="entity"/>
  <text x="810" y="725" class="entity-name">WORKOUT_SESSIONS</text>
  
  <ellipse cx="730" cy="770" rx="85" ry="25" class="attribute pk"/>
  <text x="730" y="775" class="attribute-text">session_id PK</text>
  
  <ellipse cx="890" cy="770" rx="70" ry="25" class="attribute fk"/>
  <text x="890" y="775" class="attribute-text">user_id FK</text>
  
  <ellipse cx="730" cy="820" rx="115" ry="25" class="attribute"/>
  <text x="730" y="825" class="attribute-text">routine_day_number</text>
  
  <ellipse cx="890" cy="820" rx="95" ry="25" class="attribute"/>
  <text x="890" y="825" class="attribute-text">workout_date</text>
  
  <ellipse cx="730" cy="870" rx="95" ry="25" class="attribute"/>
  <text x="730" y="875" class="attribute-text">session_order</text>

  <!-- WORKOUT_LOGS Entity -->
  <rect x="1020" y="800" width="200" height="40" class="entity"/>
  <text x="1120" y="825" class="entity-name">WORKOUT_LOGS</text>
  
  <ellipse cx="1050" cy="870" rx="60" ry="25" class="attribute pk"/>
  <text x="1050" y="875" class="attribute-text">log_id PK</text>
  
  <ellipse cx="1190" cy="870" rx="70" ry="25" class="attribute fk"/>
  <text x="1190" y="875" class="attribute-text">user_id FK</text>
  
  <ellipse cx="1050" cy="920" rx="85" ry="25" class="attribute fk"/>
  <text x="1050" y="925" class="attribute-text">session_id FK</text>
  
  <ellipse cx="1190" cy="920" rx="80" ry="25" class="attribute fk"/>
  <text x="1190" y="925" class="attribute-text">exercise_id FK</text>
  
  <ellipse cx="1050" cy="970" rx="105" ry="25" class="attribute"/>
  <text x="1050" y="975" class="attribute-text">sets_completed</text>
  
  <ellipse cx="1190" cy="970" rx="100" ry="25" class="attribute"/>
  <text x="1190" y="975" class="attribute-text">reps_completed</text>
  
  <ellipse cx="1050" cy="1020" rx="85" ry="25" class="attribute"/>
  <text x="1050" y="1025" class="attribute-text">weight_used</text>
  
  <ellipse cx="1190" cy="1020" rx="95" ry="25" class="attribute"/>
  <text x="1190" y="1025" class="attribute-text">workout_date</text>

  <!-- NEXT_WORKOUT_SELECTIONS Entity -->
  <rect x="700" y="1100" width="280" height="40" class="entity"/>
  <text x="840" y="1125" class="entity-name">NEXT_WORKOUT_SELECTIONS</text>
  
  <ellipse cx="760" cy="1170" rx="90" ry="25" class="attribute pk"/>
  <text x="760" y="1175" class="attribute-text">selection_id PK</text>
  
  <ellipse cx="920" cy="1170" rx="70" ry="25" class="attribute fk"/>
  <text x="920" y="1175" class="attribute-text">user_id FK</text>
  
  <ellipse cx="760" cy="1220" rx="80" ry="25" class="attribute fk"/>
  <text x="760" y="1225" class="attribute-text">exercise_id FK</text>
  
  <ellipse cx="920" cy="1220" rx="80" ry="25" class="attribute"/>
  <text x="920" y="1225" class="attribute-text">is_selected</text>

  <!-- Relationships -->
  
  <!-- User sets up Routine -->
  <path d="M 350,100 L 250,370" class="relationship-line"/>
  <polygon points="350,100 340,110 355,115" class="relationship"/>
  <polygon points="250,370 255,360 240,365" class="relationship"/>
  <text x="300" y="230" class="relationship-text">sets up</text>
  <text x="360" y="100" class="cardinality">1</text>
  <text x="240" y="360" class="cardinality">1</text>

  <!-- User selects Exercises -->
  <path d="M 550,100 L 900,370" class="relationship-line"/>
  <polygon points="550,100 560,110 555,95" class="relationship"/>
  <polygon points="900,370 895,360 910,365" class="relationship"/>
  <text x="720" y="230" class="relationship-text">selects</text>
  <text x="560" y="100" class="cardinality">1</text>
  <text x="890" y="360" class="cardinality">N</text>

  <!-- Default Exercises serves as base -->
  <path d="M 1100,370 L 1300,370" class="relationship-line"/>
  <polygon points="1100,370 1110,375 1110,365" class="relationship"/>
  <polygon points="1300,370 1290,375 1290,365" class="relationship"/>
  <text x="1200" y="360" class="relationship-text">serves as base</text>

  <!-- Routine has Muscles Per Day -->
  <path d="M 150,390 L 190,580" class="relationship-line"/>
  <polygon points="150,390 155,400 145,395" class="relationship"/>
  <polygon points="190,580 185,570 195,575" class="relationship"/>
  <text x="140" y="480" class="relationship-text">has</text>
  <text x="160" y="400" class="cardinality">1</text>
  <text x="200" y="570" class="cardinality">N</text>

  <!-- User has Workout State -->
  <path d="M 450,300 L 500,580" class="relationship-line"/>
  <polygon points="450,300 455,310 445,305" class="relationship"/>
  <polygon points="500,580 495,570 505,575" class="relationship"/>
  <text x="450" y="440" class="relationship-text">has</text>
  <text x="460" y="310" class="cardinality">1</text>
  <text x="510" y="570" class="cardinality">1</text>

  <!-- User completes Workout Sessions -->
  <path d="M 500,300 L 750,700" class="relationship-line"/>
  <polygon points="500,300 505,310 495,305" class="relationship"/>
  <polygon points="750,700 745,690 755,695" class="relationship"/>
  <text x="600" y="500" class="relationship-text">completes</text>
  <text x="510" y="310" class="cardinality">1</text>
  <text x="740" y="690" class="cardinality">N</text>

  <!-- Workout Sessions have Workout Logs -->
  <path d="M 920,740 L 1020,820" class="relationship-line"/>
  <polygon points="920,740 925,750 915,745" class="relationship"/>
  <polygon points="1020,820 1015,810 1025,815" class="relationship"/>
  <text x="960" y="770" class="relationship-text">has</text>
  <text x="930" y="750" class="cardinality">1</text>
  <text x="1010" y="810" class="cardinality">N</text>

  <!-- Exercises appear in Workout Logs -->
  <path d="M 1000,520 L 1100,800" class="relationship-line"/>
  <polygon points="1000,520 1005,530 995,525" class="relationship"/>
  <polygon points="1100,800 1095,790 1105,795" class="relationship"/>
  <text x="1030" y="660" class="relationship-text">logged in</text>
  <text x="1010" y="530" class="cardinality">1</text>
  <text x="1090" y="790" class="cardinality">N</text>

  <!-- User selects Next Workout -->
  <path d="M 450,300 L 800,1100" class="relationship-line"/>
  <polygon points="450,300 455,310 445,305" class="relationship"/>
  <polygon points="800,1100 795,1090 805,1095" class="relationship"/>
  <text x="600" y="700" class="relationship-text">selects next</text>
  <text x="460" y="310" class="cardinality">1</text>
  <text x="790" y="1090" class="cardinality">N</text>

  <!-- Exercises in Next Workout Selections -->
  <path d="M 900,520 L 840,1100" class="relationship-line"/>
  <polygon points="900,520 905,530 895,525" class="relationship"/>
  <polygon points="840,1100 835,1090 845,1095" class="relationship"/>
  <text x="850" y="810" class="relationship-text">selected for</text>
  <text x="910" y="530" class="cardinality">1</text>
  <text x="830" y="1090" class="cardinality">N</text>

</svg>